## 节流与防抖

#### 定义

- 节流: n 秒内只运行一次，若在 n 秒内重复触发，只有一次生效
- 防抖: n 秒后在执行该事件，若在 n 秒内被重复触发，则重新计时

一个经典的比喻:

想象每天上班大厦底下的电梯。把电梯完成一次运送，类比为一次函数的执行和响应
假设电梯有两种运行策略  `debounce`  和  `throttle`，超时设定为 15 秒，不考虑容量限制
电梯第一个人进来后，15 秒后准时运送一次，这是节流
电梯第一个人进来后，等待 15 秒。如果过程中又有人进来，15 秒等待重新计时，直到 15 秒后开始运送，这是防抖。

**debounce**
当持续触发事件时，一定时间段内没有再触发事件，事件处理函数才会执行一次，如果设定时间到来之前，又触发了事件，就重新开始延时。也就是说当一个用户一直触发这个函数，且每次触发函数的间隔小于既定时间，那么防抖的情况下只会执行一次。

**throttle**
一句话总结防抖和节流的区别：防抖是将多次执行变为最后一次执行，节流是将多次执行变为每隔一段时间执行

## 代码实现

```javascript
//防抖
function debounce(fn, delay) {
  let timer = null;
  return function () {
    if (timer !== null) {
      clearTimeout(timer);
    }
    timer = setTimeout(fn, delay);
  };
}
//节流
function throttle(fn, delay) {
  let old_time = Date.now();
  return function (...args) {
    let now_time = Date.now();
    if (now_time - old_time >= delay) {
      fn.apply(null, args);
      old_time = Date.now();
    }
  };
}
```

相关链接：
[[call & apply & bind | apply]]
